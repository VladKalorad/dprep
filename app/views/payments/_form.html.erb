
<%= form_with model: @payment, local: false, method: :post do |f| %>

  <%= f.hidden_field :cart_id, value: @cart.orderables %>
  <%= f.hidden_field :user_id, value: current_user.id %>

  <div class="form-group mb-3">
   <h2><%= f.label "Название:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :name, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.name if current_user.name.present? %>
  </div>

   <div class="form-group mb-3">
    <h2><%= f.label "Электронная почта:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :email, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.email if current_user.email.present? %>
  </div>

   <div class="form-group mb-3">
    <h2><%= f.label "Номер телефона:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :phone, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.phone if current_user.phone.present? %>
  </div>

  <div class="form-group mb-3">
   <h2> <%= f.label "Город:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :city, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.city if current_user.city.present? %>
  </div>

  <div class="form-group mb-3">
    <h2><%= f.label "Улица:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :street, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.street if current_user.street.present? %>
  </div>

    <div class="form-group mb-3">
    <h2><%= f.label "Дом:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :street, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.house if current_user.house.present? %>
  </div>

    <div class="form-group mb-3">
   <h2> <%= f.label "Квартира:", style: "margin-left:520px;" %></h2>
    <%= f.text_field :flat_number, class: 'form-control',style: "width:40%; margin-left:520px; padding:0.5% 1%; font-size: 20px;border-radius: 12px;margin-top:15px;", value: current_user.flat_number if current_user.flat_number.present? %>
  </div>

<% end %>
</div>


<div class="container mt-5 mb-3">
  <%= form_with model: @payment, local: false, method: :post do |f| %>
                <%= f.hidden_field :cart_id, value: @cart.id %>
                <%= f.hidden_field :user_id, value: current_user.id %>
                <button type="button" class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#checkoutModal" style="margin-left:300px;padding:1% 10.6%;">Оплатить</button>
                 <%= link_to 'Корзина', cart_path, class: 'btn btn-outline-dark', style: "margin-left:0px;padding:1% 10.6%;" %>
                <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModal" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title text-dark" id="checkoutModalLabel">Подтверждения заказа</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                       <div class="container-fluid">
                        <div class="row d-flex justify-content-center">
                          <div class="col-sm-12">
                            <div class="card mx-auto" style="border-radius:10px; padding:20px;">
                              <h3 class="heading">Оплата товара</h3>
                                <form class="card-details ">
                                  <div class="form-group mb-0">
                                      <p class="text-warning mb-0">Card Number</p> 
                                                    <input class='form-control' type="text" style="border-radius: 12px; width:56%;" name="card-num" placeholder="1234 5678 9012 3457" size="17" id="cno" minlength="19" maxlength="19">
                                      <img src="https://img.icons8.com/color/48/000000/visa.png" width="64px" height="60px" />
                                              </div>

                          <div class="form-group">
                              <p class="text-warning mb-0">Cardholder's Name</p> <input style="border-radius: 12px; width:56%;" class='form-control' type="text" name="name" placeholder="Name" size="17">
                          </div>
                          <div class="form-group pt-2">
                            <div class="row d-flex">
                              <div class="col-sm-4">
                                <p class="text-warning mb-0">Expiration</p>
                                <input class='form-control' style="border-radius: 12px;" type="text" name="exp" placeholder="MM/YYYY" size="7" id="exp" minlength="7" maxlength="7">
                              </div>
                              <div class="col-sm-3">
                                <p class="text-warning mb-0">Cvv</p>
                                <input class='form-control' style="border-radius: 12px;" type="password" name="cvv" placeholder="&#9679;&#9679;&#9679;" size="1" minlength="3" maxlength="3">
                              </div>
                            </div>
                          </div>		
                        </form>
                    </div>
                  </div>
                </div>
              </div>
            <p class="text-dark fs-3" style="margin-left:15px;">Сумма: <%= @cart.total.round(2) %> BYN</p>
             <%= f.submit 'Оплатить', class: 'btn btn-outline-dark', style: "padding: 7px 100px;" %><br>
          </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>          
</div>